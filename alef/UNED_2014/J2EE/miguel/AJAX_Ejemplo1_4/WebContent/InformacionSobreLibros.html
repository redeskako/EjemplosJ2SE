<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Informacion Sobre Libros</title>
<script type="text/javascript">
var xhr;
function buscarComentario(){
	if(window.ActiveXobject){
		xhr=new ActiveXObject("Microsoft.XMLHttp");
		enviarPeticion();
	}
	else if((window.XMLHttpRequest)||(typeof XMLRequest)!=undefined){
		xhr=new XMLHttpRequest();
		enviarPeticion();
	}
	else{
		alert("Su navegador no tiene soporta AJAX");
	}
}

function enviarPeticion(){
	var lista=document.getElementById("titulo");
	var tit=lista.options[lista.selectedIndex].value;
	
	// Los parametros se pasan por el método GET
	// Al llamar al servlet ComentarioLibro se envia un parametro denominado 
	// tit. El valor que se pasa en el parametro tit es el valor guardado en 
	// la variable tit.La variable tit guarda el valor proporcionado por la etiqueta
	// option de la select del documento HTML.
	
	xhr.open("GET","ComentarioLibro?tit="+tit.true);
	
	// Una vez que el servlet ComentarioLibro devuelve datos se procesa la 
	// función procesaDatos.
	xhr.onreadystatechange()=procesaDatos;
	xhr.send(null);
}

function procesaDatos(){
	if(xhr.readyState==4)
		document.getElementById("comentario").innerHTML="<i>"+xhr.responseText+"/i>";
		
	}
	
}


</script>


</head>
<body bgcolor="#8beff1">
 <center>
  <table cellspacing ="30">
   <tr>
     <td><img src="libros.jpg" /></td>
     <td><h1>Informacion sobre libros</h1></td>
   </tr>
  </table>
  <table width="30%">
  <tr><td><b>Elija Titulo del libro </b></td></tr>
   <tr>
    <td>
    <select id="titulo" onchange="buscarComentario();">
     <option> Seleccione Titulo </option>
     <option value="0">Programacion C#</option>
     <option value="1">ASP.NET</option>
     <option value="2">AJAX en un día</option>
     <option value="3">JAVA EE</option>
    </select>
    </td>
    </tr>
    <tr>
    <td>
      <br/><br/>
      <div id="comentario"></div>
     </td>
     </tr> 
    </table>
  
  
  
 </center>

</body>
</html>